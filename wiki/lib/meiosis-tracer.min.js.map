{"version":3,"sources":["webpack://meiosisTracer/webpack/universalModuleDefinition","webpack://meiosisTracer/webpack/bootstrap","webpack://meiosisTracer/./src/receive.js","webpack://meiosisTracer/./src/view.js","webpack://meiosisTracer/./src/model.js","webpack://meiosisTracer/./src/meiosis-tracer.js","webpack://meiosisTracer/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","createReceiveValues","tracerModel","view","values","update","tracerStates","length","tracerIndex","push","errorMessage","divStyle","tracerView","tracer","document","getElementById","setAttribute","String","disabled","innerHTML","JSON","stringify","querySelectorAll","streamValueDivsMarkup","t","streamTextareas","onSliderChange","renderModel","evt","index","parseInt","target","snapshot","model","reset","updateStreamValue","streamId","streamState","container","textarea","getElementsByTagName","input","div","initialView","selector","horizontal","querySelector","viewHtml","tracerContainer","addEventListener","parse","style","display","err","onModelChange","button","onToggle","onReset","Math","max","min","initStreamIds","streamIds","streamModel","triggerStreamValue","forEach","onStreamSliderChange","onStreamValueChange","streams","_model","_view","_receive","meiosisTracer","_ref","receiveValues","sendValuesBack","postMessage","type","initStreamIdModel","receiveStreamValue","data","_meiosisTracer"],"mappings":"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","file":"meiosis-tracer.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"meiosisTracer\"] = factory();\n\telse\n\t\troot[\"meiosisTracer\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","const createReceiveValues = (tracerModel, view) => (values, update) => {\n  if (update) {\n    if (tracerModel.tracerStates.length > 0) {\n      tracerModel.tracerStates.length = tracerModel.tracerIndex + 1;\n    }\n    tracerModel.tracerStates.push(values);\n    tracerModel.tracerIndex = tracerModel.tracerStates.length - 1;\n  }\n  view(values, tracerModel);\n};\n\nexport { createReceiveValues };\n","const tracerContainerId = \"tracerContainer\";\nconst dataStreamContainerId = \"dataStreamContainer\";\nconst otherStreamContainerId = \"otherStreamContainer\";\nconst tracerId = \"tracerSlider\";\nconst tracerToggleId = \"tracerToggle\";\nconst tracerResetId = \"tracerReset\";\nconst tracerIndexId = \"tracerIndex\";\nconst tracerStepBackId = \"tracerStepBack\";\nconst tracerStepForwardId = \"tracerStepForward\";\nconst tracerModelId = \"tracerModel\";\nconst errorMessageId = \"errorMessage\";\nlet errorMessage = null;\nlet divStyle = null;\n\nconst tracerView = (values, tracerModel) => {\n  const tracer = document.getElementById(tracerId);\n  tracer.setAttribute(\"max\", String(tracerModel.tracerStates.length - 1));\n  tracer.value = String(tracerModel.tracerIndex);\n  document.getElementById(tracerStepBackId).disabled = (tracerModel.tracerIndex === 0);\n  document.getElementById(tracerStepForwardId).disabled =\n    (tracerModel.tracerIndex === (tracerModel.tracerStates.length - 1));\n\n  const tracerIndex = document.getElementById(tracerIndexId);\n  tracerIndex.innerHTML = String(tracerModel.tracerIndex);\n\n  const tracerModelEl = document.getElementById(tracerModelId);\n  tracerModelEl.value = JSON.stringify(values[0].value, null, 4);\n\n  var streamValueDivs = document.querySelectorAll(\"div.dataStream\");\n\n  if (streamValueDivs.length === 0) {\n    var streamValueDivsMarkup = \"\";\n\n    for (var i = 1, t = values.length; i < t; i++) {\n      streamValueDivsMarkup +=\n        \"<div\" + divStyle + \" class='dataStream'>\" +\n          \"<textarea rows='5' cols='40'></textarea>\" +\n        \"</div>\";\n    }\n    document.getElementById(dataStreamContainerId).innerHTML = streamValueDivsMarkup;\n  }\n\n  var streamTextareas = document.querySelectorAll(\"div.dataStream textarea\");\n\n  for (i = 1, t = values.length; i < t; i++) {\n    streamTextareas[i - 1].value = JSON.stringify(values[i].value, null, 4);\n  }\n};\n\nconst onSliderChange = (renderModel, tracerModel) => evt => {\n  const index = parseInt(evt.target.value, 10);\n  const snapshot = tracerModel.tracerStates[index];\n  tracerModel.tracerIndex = index;\n  const model = snapshot[0].value;\n  renderModel(model, false);\n  tracerView(snapshot, tracerModel);\n};\n\nconst onStreamSliderChange = (streamModel, streamId) => evt => {\n  const streamState = streamModel[streamId];\n  const index = parseInt(evt.target.value, 10);\n\n  streamState.index = index;\n\n  updateStreamValue(streamId, streamState);\n};\n\nconst onStreamValueChange = (streamId, textarea, triggerStreamValue) => () => {\n  try {\n    const value = JSON.parse(textarea.value);\n    triggerStreamValue(streamId, value);\n    errorMessage.style.display = \"none\";\n  }\n  catch (err) {\n    errorMessage.style.display = \"block\";\n  }\n};\n\nconst onModelChange = renderModel => evt => {\n  try {\n    const model = JSON.parse(evt.target.value);\n    renderModel(model, true);\n    errorMessage.style.display = \"none\";\n  }\n  catch (err) {\n    errorMessage.style.display = \"block\";\n  }\n};\n\nconst onToggle = tracerContainer => evt => {\n  const button = evt.target;\n\n  if (tracerContainer.style.display === \"none\") {\n    tracerContainer.style.display = \"block\";\n    button.innerHTML = \"Hide\";\n  }\n  else {\n    tracerContainer.style.display = \"none\";\n    button.innerHTML = \"Show\";\n  }\n};\n\nconst onReset = tracerModel => () => {\n  reset(tracerModel);\n};\n\nconst reset = (tracerModel) => {\n  const snapshot = tracerModel.tracerStates[0];\n  tracerModel.tracerStates.length = 0;\n  tracerModel.tracerIndex = 0;\n  tracerView(snapshot, tracerModel);\n};\n\nconst initialView = (selector, tracerModel, renderModel, horizontal) => {\n  const target = document.querySelector(selector);\n\n  if (target) {\n    divStyle = horizontal ? \" style='float: left'\" : \"\";\n\n    const viewHtml =\n      \"<div style='text-align: right'><button id='\" + tracerToggleId + \"'>Hide</button></div>\" +\n      \"<div id='\" + tracerContainerId + \"'>\" +\n        \"<div style='text-align: right'><button id='\" + tracerResetId + \"'>Reset</button></div>\" +\n        \"<div>Data streams:</div>\" +\n        \"<input id='\" + tracerId + \"' type='range' min='0' max='\" +\n          String(tracerModel.tracerStates.length - 1) +\n          \"' value='\" + String(tracerModel.tracerIndex) + \"' style='width: 100%'/>\" +\n        \"<button id='\" + tracerStepBackId + \"'>&lt;</button> <button id='\" + tracerStepForwardId + \"'>&gt;</button> \" +\n        \"<span id='\" + tracerIndexId + \"'>\" + String(tracerModel.tracerIndex) + \"</span>\" +\n        \"<div\" + divStyle + \">\" +\n          \"<div>Model: (you can type into this box)</div>\" +\n          \"<textarea id='\" + tracerModelId + \"' rows='5' cols='40'></textarea>\" +\n          \"<div id='\" + errorMessageId + \"' style='display: none'><span style='color:red'>Invalid JSON</span></div>\" +\n        \"</div>\" +\n        \"<span id='\" + dataStreamContainerId + \"'></span>\" +\n        \"<span id='\" + otherStreamContainerId + \"'></span>\" +\n      \"</div>\";\n\n    target.innerHTML = viewHtml;\n\n    const tracerContainer = document.getElementById(tracerContainerId);\n    errorMessage = document.getElementById(errorMessageId);\n\n    document.getElementById(tracerId).addEventListener(\"input\", onSliderChange(renderModel, tracerModel));\n    document.getElementById(tracerModelId).addEventListener(\"keyup\", onModelChange(renderModel));\n    document.getElementById(tracerToggleId).addEventListener(\"click\", onToggle(tracerContainer));\n    document.getElementById(tracerResetId).addEventListener(\"click\", onReset(tracerModel));\n    document.getElementById(tracerStepBackId).addEventListener(\"click\", function() {\n      onSliderChange(renderModel, tracerModel)(\n        { target: { value: Math.max(0, tracerModel.tracerIndex - 1) }});\n    });\n    document.getElementById(tracerStepForwardId).addEventListener(\"click\", function() {\n      onSliderChange(renderModel, tracerModel)(\n        { target: { value: Math.min(tracerModel.tracerStates.length - 1, tracerModel.tracerIndex + 1) }});\n    });\n\n  }\n};\n\nconst initStreamIds = (streamIds, streamModel, triggerStreamValue) => {\n  var streamValueDivsMarkup = \"<div>Other streams:</div>\";\n\n  streamIds.forEach(streamId =>\n    streamValueDivsMarkup +=\n      \"<div\" + divStyle + \" class='otherStream' id='\" + streamId + \"'>\" +\n        \"<input type='range' min='0' max='0' value='0' style='width: 100%'/>\" +\n        \"<div>0</div>\" +\n        \"<textarea rows='5' cols='40'></textarea>\" +\n        \"<div><button>Trigger</button></div>\" +\n      \"</div>\"\n  );\n  document.getElementById(otherStreamContainerId).innerHTML = streamValueDivsMarkup;\n\n  streamIds.forEach(streamId => {\n    const container = document.getElementById(streamId);\n\n    const input = container.getElementsByTagName(\"input\")[0];\n    input.addEventListener(\"input\", onStreamSliderChange(streamModel, streamId));\n\n    const button = container.getElementsByTagName(\"button\")[0];\n    const textarea = container.getElementsByTagName(\"textarea\")[0];\n    button.addEventListener(\"click\", onStreamValueChange(streamId, textarea, triggerStreamValue));\n  });\n};\n\nconst updateStreamValue = (streamId, streamState) => {\n  const container = document.getElementById(streamId);\n  const textarea = container.getElementsByTagName(\"textarea\")[0];\n  const input = container.getElementsByTagName(\"input\")[0];\n  const div = container.getElementsByTagName(\"div\")[0];\n\n  textarea.value = JSON.stringify(streamState.values[streamState.index], null, 4);\n  input.setAttribute(\"max\", String(streamState.values.length - 1));\n  input.value = String(streamState.index);\n  div.innerHTML = String(streamState.index);\n};\n\nexport { initialView, tracerView, reset, initStreamIds, updateStreamValue };\n","const tracerModel = {\n  tracerStates: [],\n  tracerIndex: 0,\n  streams: { } // id: { index: N, values: [] }\n};\n\nexport { tracerModel };\n","import { tracerModel } from \"./model\";\nimport { initialView, tracerView, initStreamIds, updateStreamValue, reset } from \"./view\";\nimport { createReceiveValues } from \"./receive\";\n\nwindow[\"__MEIOSIS_TRACER_GLOBAL_HOOK__\"] = true;\n\nconst meiosisTracer = ({ selector, renderModel, triggerStreamValue, horizontal }) => {\n  const target = document.querySelector(selector);\n\n  if (!target) {\n    return;\n  }\n\n  const receiveValues = createReceiveValues(tracerModel, tracerView);\n\n  renderModel = renderModel || ((model, sendValuesBack) =>\n    window.postMessage({ type: \"MEIOSIS_RENDER_MODEL\", model, sendValuesBack }, \"*\"));\n\n  initialView(selector, tracerModel, renderModel, horizontal);\n\n  triggerStreamValue = triggerStreamValue || ((streamId, value) =>\n    window.postMessage({ type: \"MEIOSIS_TRIGGER_STREAM_VALUE\", streamId, value }, \"*\"));\n\n  const initStreamIdModel = (streamIds) => {\n    streamIds.forEach(streamId =>\n      tracerModel.streams[streamId] = { index: 0, values: [] }\n    );\n    initStreamIds(streamIds, tracerModel.streams, triggerStreamValue);\n  };\n\n  const receiveStreamValue = (streamId, value) => {\n    const streamState = tracerModel.streams[streamId];\n\n    streamState.values.push(value);\n    streamState.index = streamState.values.length - 1;\n\n    updateStreamValue(streamId, streamState);\n  };\n\n  window.addEventListener(\"message\", evt => {\n    if (evt.data.type === \"MEIOSIS_VALUES\") {\n      receiveValues(evt.data.values, evt.data.update);\n    }\n    else if (evt.data.type === \"MEIOSIS_STREAM_IDS\") {\n      const streamIds = evt.data.streamIds;\n      initStreamIdModel(streamIds);\n    }\n    else if (evt.data.type === \"MEIOSIS_STREAM_VALUE\") {\n      receiveStreamValue(evt.data.streamId, evt.data.value);\n    }\n  });\n\n  window.postMessage({ type: \"MEIOSIS_TRACER_INIT\" }, \"*\");\n\n  return {\n    receiveValues,\n    initStreamIdModel,\n    receiveStreamValue,\n    reset: () => reset(tracerModel)\n  };\n};\n\nexport { meiosisTracer };\n","import { meiosisTracer } from \"./meiosis-tracer\";\n\n/*\n1. Live change\n- receive values from meiosis with update=true. This will add to the tracer's history\n  and increase the slider max.\n- re-render the tracer view with update=true.\n\n2. Time-travel change\n- send MEIOSIS_RENDER_MODEL with sendValuesBack=false\n- we already have the values in the snapshot, so don't need anything back\n- re-render the tracer view with update=false.\n\n3. Typing in model textarea\n- send MEIOSIS_RENDER_MODEL with sendValuesBack=true. The tracer needs to get\n  the computed values from the other streams.\n- receive values from meiosis with update=false so this will not add to the tracer's history.\n- re-render the tracer view with update=false.\n*/\n\nmodule.exports = meiosisTracer;\n"],"sourceRoot":""}