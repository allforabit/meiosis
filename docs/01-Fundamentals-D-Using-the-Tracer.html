<!DOCTYPE html>
<html>
  <head>
    <title>Meiosis Documentation</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="normalize.css">
    <link rel="stylesheet" href="skeleton.css">
    <link rel="stylesheet" href="prism.css">
    <link rel="stylesheet" href="style.css">
  </head>
  <body class="container">
    <script src="prism.js" type="text/javascript"></script>
    <script src="https://flems.io/flems.html" type="text/javascript" charset="utf-8"></script>
    <h1><a href="https://meiosis.js.org">Meiosis</a> Documentation</h1><p><a href="toc.html">Table of Contents</a></p>
<h2>Using the Meiosis Tracer</h2><p>The <a href="https://meiosis.js.org/tracer">Meiosis Tracer</a> is a tool to observe, rewind, and replay streams
and see the results in the view. It&#39;s quite useful when developing and debugging an application.</p>
<p>Let&#39;s add the tracer to our <a href="01-Fundamentals-C-Components.html">previous example</a>.</p>
<h3>Tracing Streams</h3><p>To use the tracer, we&#39;ll need to import <code>meiosisTracer</code> and call it with some parameters to set up
communication between the streams and the UI that displays stream values. The UI allows us to
rewind, replay, and even type in stream values directly, and see the resulting view.</p>
<p>You can see the tracer below:</p>
  <div id="flems1" class="flemscode" style="height:800px"></div>

  <script>
    window.Flems(flems1, {
      files: [{name: "temperature.js", content: "/* global React */\n\nconst convert = (value, to) => Math.round(\n  (to === \"C\") ? ((value - 32) / 9 * 5) : (value * 9 / 5 + 32)\n);\n\nconst createActions = update => ({\n  editDate: evt =>\n    update(model => {\n      model.date = evt.target.value;\n      return model;\n    }),\n\n  increase: amount => _evt =>\n    update(model => {\n      model.value = model.value + amount;\n      return model;\n    }),\n\n  changeUnits: _evt => update(model => {\n    const newUnits = model.units === \"C\" ? \"F\" : \"C\";\n    const newValue = convert(model.value, newUnits);\n    return Object.assign(model, { units: newUnits, value: newValue });\n  })\n});\n\nconst createView = actions => model => (\n  <div>\n    <div>Date: <input type=\"text\" size=\"10\" value={model.date} onChange={actions.editDate}/></div>\n    <span>Temperature: {model.value}&deg;{model.units} </span>\n    <div>\n      <button onClick={actions.increase(1)}>Increase</button>\n      <button onClick={actions.increase(-1)}>Decrease</button>\n    </div>\n    <div>\n      <button onClick={actions.changeUnits}>Change Units</button>\n    </div>\n  </div>\n);\n\n// eslint-disable-next-line no-unused-vars\nconst createTemperature = update => ({\n  model: () => ({\n    date: \"\",\n    value: 20,\n    units: \"C\"\n  }),\n\n  view: createView(createActions(update))\n});\n\n", compiler: "babel"},{name: "index.js", content: "/* global ReactDOM, flyd, createTemperature, meiosisTracer */\n\nconst update = flyd.stream();\nconst temperature = createTemperature(update);\nconst models = flyd.scan((model, func) => func(model),\n  temperature.model(), update);\n\nconst element = document.getElementById(\"app\");\nmodels.map(model => { ReactDOM.render(temperature.view(model), element); });\n\n// Only for using Meiosis Tracer in development.\nmeiosisTracer({ selector: \"#tracer\", streams: [ models ] });\n", compiler: "babel"},{name: "app.html", content: "<div id=\"app\"></div>\n<div id=\"tracer\"></div>\n"},{name: "app.css", content: "body, button {\n  font-family: sans-serif;\n  font-size: 1rem;\n}\nbutton, button.light {\n  cursor: pointer;\n  padding: 2px 8px 2px 8px;\n  color: #5755d9;\n  background-color: #ffffff;\n  border: 1px solid #5755d9;\n  margin: 4px;\n}\nbutton:hover {\n  background-color: #eeeeee;\n}\nbutton.dark {\n  background-color: #5755d9;\n  color: #ffffff;\n}\nbutton.dark:hover {\n  background-color: #7775f9;\n}\n.temperature {\n  margin-bottom: 20px;\n}"}],
      links: [{name: "react", type: "js", url: "https://unpkg.com/react@16.4.1/umd/react.development.js"},{name: "react-dom", type: "js", url: "https://unpkg.com/react-dom@16.4.1/umd/react-dom.development.js"},{name: "flyd", type: "js", url: "https://unpkg.com/flyd@0.2.8/flyd.js"},{name: "meiosis-tracer", type: "js", url: "https://unpkg.com/meiosis-tracer@2.0.2/dist/meiosis-tracer.js"}],
      middle: 60,
      selected: 'index.js',
      autoFocus: false
    })
  </script>


<p>To use the Meiosis Tracer, we have two options:</p>
<ol>
<li>Add a DOM element to our page to hook up the UI, or</li>
<li>Use the
<a href="https://chrome.google.com/webstore/detail/meiosis-tracer/lcomllmppaiciocfbeefdeoplnfpnnfl">Chrome extension</a>
in which case we do <em>not</em> need to change our page. The extension displays the Tracer in Chrome&#39;s
DevTools.</li>
</ol>
<h3>Using Meiosis Tracer</h3><p>Let&#39;s start with the first option. In the HTML, we&#39;ve added a <code>&lt;div&gt;</code> where the tracer will be displayed:</p>
<pre><code class="language-html">&lt;div id=&quot;tracer&quot;&gt;&lt;/div&gt;</code></pre>
<p>Notice that we&#39;ve given it an <code>id</code> of <code>tracer</code>. Finally, we initialize the Tracer by passing it
the selector to our <code>&lt;div&gt;</code>, and the streams that we want to trace:</p>
<pre><code class="language-javascript">meiosisTracer({ selector: &quot;#tracer&quot;, streams: [ models ] });</code></pre>
<p>That will display the Tracer on our page.</p>
<h3>Using the Chrome Extension</h3><p>The second option to use the Tracer is to install the
<a href="https://chrome.google.com/webstore/detail/meiosis-tracer/lcomllmppaiciocfbeefdeoplnfpnnfl">Chrome extension</a>.
In that scenario, we do <strong>not</strong> pass the <code>selector</code> parameter, and we don&#39;t need to add a DOM
element to our application. We just pass the streams that we want to trace:</p>
<pre><code class="language-javascript">meiosisTracer({ streams: [ models ] });</code></pre>
<p>When you open Chrome&#39;s DevTools, you&#39;ll see a Meiosis tab containing the Tracer UI.</p>
<h3>Rewind, Replay, Observe</h3><p>Try entering values in the text fields of the example, increasing and decreasing the temperature,
and then click on the Save button. As you are doing this, you&#39;ll see snapshots of the model being
displayed in the tracer. You&#39;ll also notice an increase in the total number on the slider.</p>
<p>Next, try dragging the slider back towards the left, and then towards the right. You&#39;ll see that
you are rewinding and replaying the model snapshots, with the view showing the corresponding
results.</p>
<p>Finally, try typing in values directly in the model textarea, and pressing the <code>Send</code> button.
As long as you have valid JSON, you should see the view reflect the result of rendering with
the model that you&#39;ve entered.</p>
<p>This is a great way to develop and debug an application. You can see what the view looks like for a
given model. If you enter a temperature value, you&#39;ll see it in the view. If you change the
temperature units from <code>C</code> to <code>F</code>, you see in fact that the view does <em>not</em> reflect the change.
You&#39;ve discovered that we are not (yet) using the units from the model! We&#39;ll be fixing that in the
next part.</p>
<h3>Principles / Takeaways</h3><ul>
<li>The Meiosis Tracer is useful for observing, replaying, and experimenting with streams in
your application.</li>
<li>You can easily add the Tracer to your application, and remove it when you are done.</li>
<li>Or you can use the Chrome DevTools Extension.</li>
<li>There are more options that you can use, see the
<a href="https://meiosis.js.org/tracer">Meiosis Tracer documentation</a> for more details.</li>
</ul>
<h3>Up Next</h3><p>Let&#39;s take a step back and summarize what we&#39;ve learned by looking at the
<a href="01-Fundamentals-E-Goals.html">Meiosis Goals</a>.</p>
<p><a href="toc.html">Table of Contents</a></p>
<hr>
<p><a href="https://meiosis.js.org">Meiosis</a> is developed by <a href="http://twitter.com/foxdonut00">@foxdonut00</a> / <a href="https://github.com/foxdonut">foxdonut</a> and is released under the MIT license.</p>
  </body>
</html>
