<!DOCTYPE html>
<html>
  <head>
    <title>Meiosis Tutorial</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="normalize.css">
    <link rel="stylesheet" href="skeleton.css">
    <link rel="stylesheet" href="prism.css">
    <link rel="stylesheet" href="style.css">
  </head>
  <body class="container">
    <script src="prism.js" type="text/javascript"></script>
    <script src="https://flems.io/flems.html" type="text/javascript" charset="utf-8"></script>
    <h1><a href="http://meiosis.js.org">Meiosis</a> Tutorial</h1><p><a href="toc.html">Table of Contents</a></p>
<h2>07 - Stream Library</h2><p>In the previous lesson, <a href="06-scan-react.html">06 - Scan</a>, we improved our <code>stream</code> implementation
by supporting an initial value, and we implemented <code>scan</code>. With <code>scan</code> being a great fit for our
reactive loop, we used it for our setup code.</p>
<h3>Use a stream library or your own implementation - it&#39;s your choice!</h3><p>Hopefully, having implemented a simple stream with <code>map</code> and <code>scan</code> has solidified your
understanding of how to use them to set up the Meiosis pattern.</p>
<p>In doing so, we&#39;ve also seen how you can implement the Meiosis pattern without any dependencies,
with just a handful of lines of code.</p>
<p>That being said, you can also use a stream library. It&#39;s your choice. In this lesson, we will
use <a href="https://github.com/paldepind/flyd">flyd</a>. You can also use another stream library simply by
using its equivalent of <code>map</code>, <code>scan</code>, and pushing a value onto a stream.</p>
<h3>Using <code>flyd</code></h3><p>The example below uses <a href="https://github.com/paldepind/flyd">flyd</a>. The equivalent of our <code>stream</code>
and <code>scan</code> functions are <code>flyd.stream</code> and <code>flyd.scan</code> respectively. The <code>map</code> method works the
same way.</p>
<p>The code also implements a solution to the exercise at the end of the
<a href="06-scan-react.html">previous lesson</a>, pushing objects onto the <code>update</code> stream and handling
them in the accumulator function.</p>
  <div id="flems1" class="flemscode" style="height:800px"></div>

  <script>
    window.Flems(flems1, {
      files: [{name: "07-stream-lib.js", content: "/*global React, ReactDOM, flyd*/\n\n// -- Application code\n\nvar createView = function(update) {\n  var oper = function(obj) {\n    return function(_event) {\n      update(obj);\n    };\n  };\n  var view = function(model) {\n    return (<div>\n      <div>Counter: {model}</div>\n      <button onClick={oper({ oper: \"add\", value: 1 })}>+1</button>\n      <button onClick={oper({ oper: \"times\", value: 2 })}>*2</button>\n    </div>);\n  };\n  return view;\n};\n\n// -- Meiosis pattern setup code\n\nvar update = flyd.stream();\nvar view = createView(update);\n\nvar models = flyd.scan(function(model, obj) {\n  if (obj.oper === \"add\") {\n    return model + obj.value;\n  }\n  else if (obj.oper === \"times\") {\n    return model * obj.value;\n  }\n  else {\n    return model;\n  }\n}, 0, update);\n\nvar element = document.getElementById(\"app\");\n\nmodels.map(function(model) {\n  ReactDOM.render(view(model), element);\n});\n", compiler: "babel"},{name: "app.html", content: "<div id=\"app\"></div>\n"},{name: "app.css", content: "body, button {\n  font-family: sans-serif;\n  font-size: 1rem;\n}\nbutton, button.light {\n  cursor: pointer;\n  padding: 2px 8px 2px 8px;\n  color: #5755d9;\n  background-color: #ffffff;\n  border: 1px solid #5755d9;\n  margin: 4px;\n}\nbutton:hover {\n  background-color: #eeeeee;\n}\nbutton.dark {\n  background-color: #5755d9;\n  color: #ffffff;\n}\nbutton.dark:hover {\n  background-color: #7775f9;\n}\n.temperature {\n  margin-bottom: 20px;\n}"}],
      links: [{name: "react", type: "js", url: "https://unpkg.com/react@16.3.1/umd/react.development.js"},{name: "react-dom", type: "js", url: "https://unpkg.com/react-dom@16.3.1/umd/react-dom.development.js"},{name: "flyd", type: "js", url: "https://unpkg.com/flyd@0.2.6/flyd.js"}],
      middle: 75
    })
  </script>


<p>As you can see, the streams work the same way as before. So, it&#39;s really up to your preference
whether to use a stream library or use your own implementation.</p>
<p>When you are ready, continue on to <a href="08-accumulator-react.html">08 - Accumulator</a>.</p>
<p><a href="toc.html">Table of Contents</a></p>
<hr>
<p><a href="http://meiosis.js.org">Meiosis</a> is developed by <a href="http://twitter.com/foxdonut00">@foxdonut00</a> / <a href="https://github.com/foxdonut">foxdonut</a> and is released under the MIT license.</p>
  </body>
</html>